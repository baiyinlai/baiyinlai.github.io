<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="personal blog, Notes, GitHub, Jekyll, baige5117, all for one, 个人博客, 个人网站, 学习笔记, Music, Picture, 励志成功, 开心一刻, 学习提升, 工具, 软件" />
    <meta name="description" content="Baige5117's personal website, mainly for recording and sharing, including blogs, sayings, music, photos and anything interesting." />
    <meta name="author" content="Baige5117" />
    <meta name="robots" content="all,index,follow" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta name="revisit-after" content="7 days" />
    <meta name="rating" content="general" />
    <meta name="distribution" content="global" />
    <title>Linux 中 Grep 命令使用方法</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    


    <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  </head>
  <body>
    <div id="top_menu">
  <div id="t_m_center">
    <div id="title">
      <a href="/" title="Home">
	<img id="hometip" src="/images/icons/home.png" alt="home" title="Home" />
      </a>
      <p>Love life, love sports, love to learn, & love...</p>
    </div>
    <ul id="top_nav">
      
       
      <li id="t_n_li">
	<a href="/blog/index.html" title="博文"><span class="db nav_bg nav_blog"></span></a>
      </li> 
      
       
      <li id="t_n_li">
	<a href="/sayings.html" title="言语"><span class="db nav_bg nav_sayings"></span></a>
      </li> 
      
       
      <li id="t_n_li">
	<a href="/music.html" title="音乐"><span class="db nav_bg nav_music"></span></a>
      </li> 
      
       
      <li id="t_n_li">
	<a href="/pictures.html" title="图片"><span class="db nav_bg nav_pictures"></span></a>
      </li> 
      
       
      <li id="t_n_li">
	<a href="/x.html" title="X"><span class="db nav_bg nav_x"></span></a>
      </li> 
      
       
      <li id="t_n_li">
	<a href="/about.html" title="关于"><span class="db nav_bg nav_about"></span></a>
      </li> 
      
    </ul>
  </div>
</div>

    <div id="page_title">
  <img src="/images/blog.png" id="p_t_img"/>
  <h2><a href="/blog/">Blog</a></h2>
  <p>Thought,&#160; done&#160; &&#160; record.</p>
  <div id="top_icons">
    <a href="#" title="订阅到QQ邮箱" target="_blank" ><img src="/images/icons/qq-24.png" alt="订阅到QQ邮箱" title="订阅到QQ邮箱" /></a>
    <a href="#" title="订阅到iGoogle或Google Reader" target="_blank"><img src="/images/icons/rss-24.png" alt="google reader" title="订阅到iGoogle或Google Reader" /></a>
    <a href="#" title="My Github" target="_blank"><img src="/images/icons/github-24.png" alt="google reader" title="My Github" /></a>
  </div>
  <div id="google_search"><!--Google站内搜索开始-->
    <form name="cse" id="searchbox_demo" action="/search.html">
      <input type="hidden" name="cref" value="" />
      <input type="hidden" name="ie" value="utf-8" />
      <input type="hidden" name="hl" value="zh-CN" />
      <input name="q" type="text" size="20" />
      <input type="submit" name="sa" value="Search" />
    </form>
    <!--script type="text/javascript" src="http://www.google.com/cse/tools/onthefly?form=searchbox_demo&lang=zh-CN"></script-->
  </div><!--Google站内搜索结束-->
</div>

    <div id="out_wrap">
      <div id="wrap">
	<div id="post_wrapper">
  <h1 class="post_title">Linux 中 Grep 命令使用方法</h1>
  <div id="post_info">
    <ul>
      <li class="p_i_bg date">2012-12-04</li>
      <li class="p_i_bg author"><a href="" target="_blank">The Geek Stuff</a></li>
      <li class="p_i_bg cat"><a href="/blog/categories.html#工具与软件">工具与软件</a></li>
      <li class="p_i_bg tag"><a href="/blog/tags.html#Linux">Linux&nbsp;&nbsp;</a></li>
      
    </ul>
  </div>
  <p>grep（global search regular expression(RE) and print out the line，全面搜索正则表达式并把行打印出来）是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。</p>

<p>grep的工作方式是这样的，它在一个或多个文件中搜索字符串模板。如果模板包括空格，则必须被引用，模板后的所有字符串被看作文件名。搜索的结果被送到屏幕，不影响原文件内容。</p>

<p>首先创建一个演示文档用于后续对 grep 命令的讲解演示：</p>

<pre><code>$ cat demo_file
THIS LINE IS THE 1ST UPPER CASE LINE IN THIS FILE.
this line is the 1st lower case line in this file.
This Line Has All Its First Character Of The Word With Upper Case.

Two lines above this line is empty.
And this is the last line.
</code></pre>

<h4>1、在单个文件中搜索特定的字符串，输出为包含特定字符串的文本行</h4>

<pre><code>Syntax:
grep "literal_string" filename

$ grep "this" demo_file
this line is the 1st lower case line in this file.
Two lines above this line is empty.
</code></pre>

<h4>2、在多个文件中检索指定的字串，输出为包含特定字符串的文件名和文本行</h4>

<pre><code>Syntax:
grep "string" FILE_PATTERN
</code></pre>

<p>为了演示需要先将刚才的演示文档复制一份。输出的文本行前面会加上相应的文件名。</p>

<pre><code>$ cp demo_file demo_file1

$ grep "this" demo_*
demo_file:this line is the 1st lower case line in this file.
demo_file:Two lines above this line is empty.
demo_file:And this is the last line.
demo_file1:this line is the 1st lower case line in this file.
demo_file1:Two lines above this line is empty.
demo_file1:And this is the last line.
</code></pre>

<h4>3、利用 grep -i 进行大小写无关的搜索</h4>

<pre><code>Syntax:
grep -i "string" FILE
</code></pre>

<p>将忽略大小写的区别，这样的话，字符串“the”，“The”和“THE”都将被搜索。</p>

<pre><code>$ grep -i "the" demo_file
THIS LINE IS THE 1ST UPPER CASE LINE IN THIS FILE.
this line is the 1st lower case line in this file.
This Line Has All Its First Character Of The Word With Upper Case.
And this is the last line.
</code></pre>

<h4>4、使用用正则表达式</h4>

<pre><code>Syntax:
grep "REGEX" filename
</code></pre>

<p>例如，要搜索全部以“lines”开始以“empty”结束的字串，如搜索“lines[之间任意字]empty”，并且忽略大小写：</p>

<pre><code>$ grep -i "lines.*empty" filename //中间的点不能省略
</code></pre>

<p>正则表达式遵循的几个重复的操作：</p>

<ul>
<li>? 最多匹配一次</li>
<li>* 匹配零次或者任意多次</li>
<li>+ 匹配一次以上</li>
<li>{n} 匹配n次</li>
<li>{n,} 最少匹配n次</li>
<li>{,m} 最多匹配m次</li>
<li>{n,m} 匹配n到m次</li>
</ul>


<h4>5、用 grep -w 搜索整个词，而不是词中的部分字符串</h4>

<p>搜索包含单词为“is”的文本行，当然包含“his”, “this” 等的文本行将忽略：</p>

<pre><code>$ grep -i "is" demo_file
THIS LINE IS THE 1ST UPPER CASE LINE IN THIS FILE.
this line is the 1st lower case line in this file.
This Line Has All Its First Character Of The Word With Upper Case.
Two lines above this line is empty.
And this is the last line.
</code></pre>

<h4>6、利用 grep -A -B -C 显示所匹配的文本行的前/后/前后一些行内容</h4>

<p>对于一些大型文件，不仅显示所匹配的文本行，而且显示之前/之后/前后的一些文本行也是很有用的。为演示需要，先创建另一个演示文档：</p>

<pre><code>$ cat demo_text
 4. Vim Word Navigation

 You may want to do several navigation in relation to the words, such as:

  * e - go to the end of the current word.
  * E - go to the end of the current WORD.
  * b - go to the previous (before) word.
  * B - go to the previous (before) WORD.
  * w - go to the next word.
  * W - go to the next WORD.

 ORD - WORD consists of a sequence of non-blank characters, separated with white space.
 word - word consists of a sequence of letters, digits and underscores.

 Example to show the difference between WORD and word

  * 192.168.1.1 - single WORD
  * 192.168.1.1 - seven words.
</code></pre>

<p>6.1、显示匹配行<b>之后</b>的行 -A（After）</p>

<pre><code>Syntax:
grep -A &lt;N&gt; "string" FILENAME
</code></pre>

<p>例如，显示匹配行之后的三行内容（空行也算）：</p>

<pre><code>$ grep -A 3 -i "example" demo_text
Example to show the difference between WORD and word

* 192.168.1.1 - single WORD
* 192.168.1.1 - seven words.
</code></pre>

<p>6.2、显示匹配行<b>之前</b>的行 -B（Before）</p>

<pre><code>Syntax:
grep -B &lt;N&gt; "string" FILENAME
</code></pre>

<p>例如，显示匹配行之前的两行内容（空行也算）：</p>

<pre><code>$ grep -B 2 "single WORD" demo_text
Example to show the difference between WORD and word

* 192.168.1.1 - single WORD
</code></pre>

<p>6.3、显示匹配行<b>前后</b>的行 -C</p>

<p>例如，显示匹配行前后的各两行内容（空行也算）：</p>

<pre><code>$ grep -C 2 "Example" demo_text
word - word consists of a sequence of letters, digits and underscores.

Example to show the difference between WORD and word

* 192.168.1.1 - single WORD
</code></pre>

<h4>7、高亮显示匹配的内容</h4>

<p>需要设置 GREP_OPTIONS 环境变量：</p>

<pre><code>$ export GREP_OPTIONS='--color=auto' GREP_COLOR='100;8'
</code></pre>

<p>然后再进行搜索。</p>

<pre><code>$ export GREP_OPTIONS='--color=auto' GREP_COLOR='100;8'

$ grep this demo_file
this line is the 1st lower case line in this file.
Two lines above this line is empty.
And this is the last line.
</code></pre>

<h4>8、利用 grep -r 在目录中递归搜索</h4>

<p>如果在目录中即有文件又有目录，则普通的搜索只搜索文件而不搜索目录，利用 -r 选项即可递归进行搜索，搜索目录下的所有文件及其子目录内的文件。</p>

<pre><code>$ grep -r "ramesh" *
</code></pre>

<h4>9、利用 grep -v 搜索不包含特定字符串的文本行</h4>

<p>例如显示所有不包含字符串“go”的文本行：</p>

<pre><code>$ grep -v "go" demo_text
4. Vim Word Navigation

You may want to do several navigation in relation to the words, such as:

WORD - WORD consists of a sequence of non-blank characters, separated with white space.
word - word consists of a sequence of letters, digits and underscores.

Example to show the difference between WORD and word

* 192.168.1.1 - single WORD
* 192.168.1.1 - seven words.
</code></pre>

<h4>10、显示不包含所有几个特定字符串的文本行</h4>

<pre><code>Syntax:
grep -v -e "pattern" -e "pattern"


$ cat test-file.txt
a
b
c
d

$ grep -v -e "a" -e "b" -e "c" test-file.txt
d
</code></pre>

<h4>11、利用grep -c统计所匹配的字符串数目</h4>

<pre><code>Syntax:
grep -c "pattern" filename
</code></pre>

<p>例如：</p>

<pre><code>$ grep -c "go" demo_text
6
</code></pre>

<p>查找有多少行匹配字符串：</p>

<pre><code>$ grep -c this demo_file
3
</code></pre>

<p>查找有多少行不匹配字符串：</p>

<pre><code>$ grep -v -c this demo_file
4
</code></pre>

<h4>12、利用 grep -l 只显示包含特定字符串的文件名称</h4>

<pre><code>$ grep -l this demo_*
demo_file
demo_file1
</code></pre>

<h4>13、利用 grep -o 只显示所匹配的字符串</h4>

<p>默认的搜索显示的是匹配的文本行的所有内容，但是如果想只显示所搜的特定字符串，则就要使用 -o 选项了。乍看起来只显示所匹配的字符串好像用处不大，但在使用正则表达式的搜索中很有用处。</p>

<pre><code>$ grep -o "is.*line" demo_file
is line is the 1st lower case line
is line
is is the last line
</code></pre>

<h4>14、显示特定字符串的具体位置</h4>

<pre><code>Syntax:
grep -o -b "pattern" file
</code></pre>

<p>例如：</p>

<pre><code>$ cat temp-file.txt
12345
12345

$ grep -o -b "3" temp-file.txt
2:3
8:3
</code></pre>

<h4>15、利用 grep -n 同时显示行号</h4>

<pre><code>$ grep -n "go" demo_text
5: * e - go to the end of the current word.
6: * E - go to the end of the current WORD.
7: * b - go to the previous (before) word.
8: * B - go to the previous (before) WORD.
9: * w - go to the next word.
10: * W - go to the next WORD.
</code></pre>

  <div id="post_nxpr">
    <ul>
      
      <li id="post_pre">
	<span class="emphasize_zh">上一篇：</span> 
	<a rel="prev" href="/blog/2012-12-04-the_basic_usage_of_FreeCAD" title="FreeCAD的使用">FreeCAD的使用</a>
      </li>
      
      
      <li id="post_next">
	<span class="emphasize_zh">下一篇：</span>
	<a rel="next" href="/blog/2012-12-08-%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95" title="经典排序算法">经典排序算法</a>
      </li>
      
    </ul>
  </div>
</div> 

      </div><!--End_wrap-->
    </div>
    <div id="footer">
<div class="bottom_nav"><a href="/">Home</a> &#160;&#124;&#160; <a href="/blog/index.html">Blog</a> &#160;&#124;&#160; <a href="/sayings.html">Sayings</a> &#160;&#124;&#160; <a href="/music.html">Music</a> &#160;&#124;&#160; <a href="/pictures.html">Pictures</a> &#160;&#124;&#160; <a href="/x.html">X</a> &#160;&#124;&#160; <a href="/about.html">About</a></div>

<div class="copyright">Copyright &#169; 2011-2013 by <a href="/index.html">Baige5117</a>. All Rights Reserved</div>
</div>
<div id="gotop">回顶部</div>
<script type="text/javascript" src="/js/gotop.js"></script>

    <!--以下为百度统计代码-->
    <script type="text/javascript">
      var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
      document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fb145740af16f12510a2d43b45804e638' type='text/javascript'%3E%3C/script%3E"));
    </script>
    
  </body>
</html>


